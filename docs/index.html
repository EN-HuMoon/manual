<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>教學手冊</title>

  <style>
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans TC", Arial;
      background: linear-gradient(135deg,#0f172a,#1e293b);
      color:#fff;
      display:flex;
      justify-content:center;
      align-items:center;
      min-height:100vh;
      padding:24px;
    }

    .container{
      width:900px;
      max-width:95%;
      background:rgba(255,255,255,0.05);
      border-radius:20px;
      padding:26px;
      box-shadow:0 20px 50px rgba(0,0,0,0.4);
      backdrop-filter: blur(18px);
    }

    .viewer{
      position:relative;
      display:flex;
      justify-content:center;
      align-items:center;
      padding: 10px 36px; /* ✅ 左右留空，按鈕更不會壓到圖片 */
    }

    /* ✅ 兩張圖片重疊做轉場 */
    #slideA, #slideB{
      max-width:100%;
      max-height:450px;
      border-radius:15px;
      transition: transform 0.42s ease, opacity 0.42s ease;
      will-change: transform, opacity;
      box-shadow: 0 10px 40px rgba(0,0,0,.35);
      user-select:none;
      -webkit-user-drag:none;
    }
    #slideA{
      opacity:1;
      transform: translateX(0);
      position:relative;
      z-index:1;
    }
    #slideB{
      position:absolute;
      z-index:2;
      opacity:0;
      transform: translateX(0);
    }

    /* ✅ 圓形左右按鈕 */
    .arrow{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      width:44px;
      height:44px;
      display:grid;
      place-items:center;
      font-size:28px;
      line-height:1;
      cursor:pointer;
      user-select:none;
      border-radius:50%;
      background:rgba(15,23,42,0.55);
      border:1px solid rgba(255,255,255,0.18);
      box-shadow:0 10px 30px rgba(0,0,0,0.25);
      transition: transform 140ms ease, background 140ms ease, box-shadow 180ms ease, opacity 140ms ease;
      backdrop-filter: blur(10px);
      z-index: 5;
    }
    .arrow:hover{
      background:rgba(99,102,241,0.28);
      box-shadow:0 10px 35px rgba(99,102,241,0.18);
      transform:translateY(-50%) scale(1.05);
    }
    .arrow:active{
      transform:translateY(-50%) scale(0.98);
    }
    .arrow.disabled{
      opacity:0.35;
      pointer-events:none;
    }

    /* ✅ 按鈕往外挪，不壓到圖片 */
    .left{ left:-18px; }
    .right{ right:-18px; }

    /* ✅ 圖片下方的現代玻璃資訊區（第二層背景） */
    .panel{
      margin-top: 18px;
      padding: 16px 16px 14px;
      border-radius: 16px;
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 14px 40px rgba(0,0,0,.28);
      backdrop-filter: blur(14px);
    }

    .text{
      margin-top:0;
      line-height:1.7;
      font-size:16px;
      opacity:0.92;
      white-space: pre-line;
    }

    .step{
      margin-top:12px;
      padding-top: 10px;
      border-top: 1px solid rgba(255,255,255,.10);
      font-size:13px;
      opacity:0.75;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
    }

    .hint{
      font-size:12px;
      opacity:0.85;
      margin-left: 6px;
    }

    .kbd{
      display:flex;
      gap:6px;
      align-items:center;
      font-size:12px;
      opacity:0.85;
    }
    .key{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px;
      padding:2px 8px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
    }
  </style>
</head>

<body>
  <div class="container">

    <div class="viewer">
      <div class="arrow left" id="btnPrev" title="上一頁 (←)">‹</div>

      <!-- 兩張圖疊加：用來做滑動轉場 -->
      <img id="slideA" src="assets/step1.png" alt="step image A">
      <img id="slideB" src="" alt="step image B">

      <div class="arrow right" id="btnNext" title="下一頁 (→)">›</div>
    </div>

    <!-- ✅ 第二層背景：現代玻璃卡片區 -->
    <div class="panel">
      <div class="text" id="text">載入中...</div>

      <div class="step">
        <div>
          <span id="stepLabel">Step 1 / 1</span>
          <span class="hint" id="hint"></span>
        </div>
        <div class="kbd">
          <span class="key">←</span><span class="key">→</span>
        </div>
      </div>
    </div>

  </div>

  <script>
    // ✅ 只要改這裡：圖片放 docs/assets/ 底下
    const steps = [
      {
        img: "assets/step1.png",
        text: "這是步驟 1 的說明文字。\n你可以換行。\n也可以寫注意事項。",
        hint: "提示：用左右箭頭切換"
      },
      {
        img: "assets/step2.png",
        text: "這是步驟 2 的說明文字。\n這一步可以描述操作細節。",
        hint: "提示：也支援鍵盤 ← →"
      },
    ];

    let index = 0;
    let usingA = true;
    let animating = false;

    const slideA = document.getElementById("slideA");
    const slideB = document.getElementById("slideB");
    const textEl = document.getElementById("text");
    const stepLabel = document.getElementById("stepLabel");
    const hintEl = document.getElementById("hint");
    const btnPrev = document.getElementById("btnPrev");
    const btnNext = document.getElementById("btnNext");

    function setNavState(){
      btnPrev.classList.toggle("disabled", index === 0);
      btnNext.classList.toggle("disabled", index === steps.length - 1);
      stepLabel.textContent = `Step ${index + 1} / ${steps.length}`;
      hintEl.textContent = steps[index].hint || "";
    }

    function setText(){
      textEl.textContent = steps[index].text || "";
    }

    function animateTo(nextIndex, dir){
      if (animating) return;
      if (nextIndex < 0 || nextIndex >= steps.length) return;

      animating = true;

      const current = usingA ? slideA : slideB;
      const next = usingA ? slideB : slideA;

      // 位移距離（px）— 想更明顯就改 50
      const outX = (dir === "next") ? -30 : 30;
      const inX  = (dir === "next") ? 30 : -30;

      next.src = steps[nextIndex].img;

      // next 先在旁邊 + 透明
      next.style.transition = "none";
      next.style.opacity = "0";
      next.style.transform = `translateX(${inX}px)`;

      // 強制 reflow 讓 transition 生效
      next.offsetHeight;

      // 啟動動畫：current 出去、next 進來
      current.style.transition = "transform 0.42s ease, opacity 0.42s ease";
      next.style.transition = "transform 0.42s ease, opacity 0.42s ease";

      requestAnimationFrame(() => {
        current.style.opacity = "0";
        current.style.transform = `translateX(${outX}px)`;

        next.style.opacity = "1";
        next.style.transform = "translateX(0)";
      });

      // 動畫結束後收尾
      const onDone = () => {
        // current 重置
        current.style.transition = "none";
        current.style.opacity = "0";
        current.style.transform = "translateX(0)";

        usingA = !usingA;
        index = nextIndex;

        setText();
        setNavState();

        animating = false;
        next.removeEventListener("transitionend", onDone);
      };

      next.addEventListener("transitionend", onDone, { once: true });
    }

    function next(){
      if (index >= steps.length - 1) return;
      animateTo(index + 1, "next");
    }

    function prev(){
      if (index <= 0) return;
      animateTo(index - 1, "prev");
    }

    // 按鈕
    btnNext.addEventListener("click", next);
    btnPrev.addEventListener("click", prev);

    // 鍵盤
    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowRight") next();
      if (e.key === "ArrowLeft") prev();
    });

    // 初始化
    (function init(){
      if (!steps.length) {
        textEl.textContent = "請在 steps 裡加入教學資料。";
        btnPrev.classList.add("disabled");
        btnNext.classList.add("disabled");
        return;
      }
      slideA.src = steps[0].img;
      slideA.style.opacity = "1";
      slideA.style.transform = "translateX(0)";
      slideB.style.opacity = "0";
      setText();
      setNavState();
    })();
  </script>
</body>
</html>
